name: Render Content Farm RealSolve

on:
  # –ó–∞–ø—É—Å–∫ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ GitHub UI
  workflow_dispatch:
      
  # –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ push –≤ main
  push:
    branches: [ main ]
    paths: [ 'src/**' ]

jobs:
  render:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'
        
    - name: Install dependencies
      run: |
        npm install
        npm install typescript @types/node
        echo "‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ"
        
    - name: Render video
      run: |
        echo "üìÅ –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ñ–∞–π–ª–æ–≤:"
        ls -la src/
        echo "üé¨ –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏:"
        npx remotion compositions src/Root.tsx || true
        echo "üöÄ –ù–∞—á–∏–Ω–∞–µ–º —Ä–µ–Ω–¥–µ—Ä:"
        mkdir -p output
        npx remotion render src/Root.tsx ZyraRealSolve output/github-render.mp4 --overwrite --log=verbose
          
    - name: Upload rendered video
      uses: actions/upload-artifact@v4
      with:
        name: zyra-realsolve-${{ github.run_number }}
        path: output/github-render.mp4
        retention-days: 7
        
    - name: Show result
      run: |
        echo "‚úÖ –†–µ–Ω–¥–µ—Ä –∑–∞–≤–µ—Ä—à–µ–Ω!"
        echo "üìÅ –í–∏–¥–µ–æ –¥–æ—Å—Ç—É–ø–Ω–æ –≤ Artifacts"
        ls -la output/
